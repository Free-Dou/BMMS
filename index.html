<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta charset="utf-8">

<html>
	<head>
		<title>BMMSへようこそ！</title>
		<style type="text/css">
			.main-background-img
			{
				background: url("5_mohu.jpg") no-repeat;
				position: absolute;
			}
			.banner-background
			{
				margin-top: 275px;
				width: 100%;
				height: 0px;
				background-color: rgba(0, 0, 0, 0.55);
				overflow: hidden;
			}
			.login-background
			{
				margin-right: auto;
				margin-left: auto;
				height: 200px;
				width: 400px;
				text-align: middle;
				line-height: 20px;
				padding-top: 6px;
			}
			.space
			{
				margin-left: auto;
				margin-right: auto;
				width: 400px;
				height: 200px;
			}
			.space-small
			{
				margin-left: auto;
				margin-right: auto;
				width: 400px;
				height: 20px;
			}
			.float-left
			{
				float: left;
				text-align: right;
				width: 80px;
				height: 20px;
				color: #FFFFFF;
			}
			.float-right
			{
				float: left;
				text-align: left;
				height: 20px;
			}
			.textbox-common
			{
				width: 250px;
			}
			.normal-line
			{
				height: 35px;
			}
			.login-process-cover
			{
				padding: 0px;

				background-color: rgba(0,0,0,0);

				height: 100%;
				width: 100%;

				position: absolute;
				visibility: hidden;

				cursor: wait;
				color: #FFFFFF;
			}
			.login-process-inner
			{
				padding: 0px;
			
				top: 350px;
				left: 50%;
				width: 100px;
				height: 100px;
				
				position: absolute;
				color: #FFFFFF;
				transform: translateX(-50%);
			}
			.login_success_image
			{
				background: url('Success.png');
				background-size: cover;
				transform: translateX(-50%) scale(0,0);
			}
			.process-item
			{
				background: url('process-item.png') no-repeat;
				background-size: cover;
				top: 0px;
				left: 50%;
				width: 10px;
				height: 10px;
				position: absolute;
				transform: translateX(-50%) translateY(-50%);
			}
		</style>
		<style type="text/css">
			@import url(CSS/common-style.css);
		</style>

		<script type="text/javascript">
			var process_time_last = 0;
			var pi_pos = new Array();
			var center_y = 50;
			var center_x = 50;
			var cover_alpha = 0;
			var pi_parent_scale = 1;

			for(var i = 0; i < 5; i++)
				pi_pos[i] = 0;

			setTimeout("login_banner_show()", 10);
			function login_banner_show()
			{
				var x = document.getElementById("test");
				var v = (200 - x.offsetHeight) / 6;
				if(v < 1)
					return;
				x.style.height = x.offsetHeight + v + "px";
				setTimeout("login_banner_show()", 10);
			}
			function login_click()
			{
				login_show();
			}
			function button_mouseenter()
			{
				var x = document.getElementById("login_button");
				x.style.color = "black";
				x.style.backgroundColor = "white";
			}
			function button_mouseleave()
			{
				var x = document.getElementById("login_button");
				x.style.color = "white";
				x.style.backgroundColor = "#0078D7";
			}
			function button_mousedown()
			{
				var x = document.getElementById("login_button");
				x.style.color = "black";
				x.style.backgroundColor = "#F7F7F7";
			}
			function button_mouseup()
			{
				var x = document.getElementById("login_button");
				x.style.color = "black";
				x.style.backgroundColor = "white";
			}
			function login_success(hold_time)
			{
				var e = document.getElementById("process_tip");
				e.innerHTML="登录成功，" + hold_time + " 秒后跳转";
				hold_time = hold_time - 1;
				if(hold_time < 0)
				{
					location.href='mainpage.html';
					return;
				}
				setTimeout("login_success('" + hold_time + "')", 1000);
			}
			function login_show()
			{
				var e = document.getElementById("pi1");

				e = document.getElementById("process_message");
				e.style.visibility = "visible";

				var s_id = setInterval("process_anime()", 10);
				setTimeout("login_show_anime()", 10);
				setTimeout("process_going('" + s_id + "')", 10);
			}
			function login_show_anime()
			{
				var e = document.getElementById("process_message");
				cover_alpha = cover_alpha + 0.03;
				e.style.backgroundColor = "rgba(0,0,0," + cover_alpha + ")";
				if(cover_alpha >= 0.6)
					return;
				setTimeout("login_show_anime()", 10);
			}
			function process_anime()
			{
				var need_change = parseInt(process_time_last / 10);
				if(need_change > 5)
					need_change = 5;
				for(var i = 0; i < need_change; i++)
				{
					var e = document.getElementById("pi" + i);
					if (pi_pos[i] > 360) 
						pi_pos[i] = pi_pos[i] - 360;

					if(pi_pos[i] < 180)
						pi_pos[i] = pi_pos[i] + (pi_pos[i] + 10) / 20;
					else if(pi_pos[i] < 360)
						pi_pos[i] = pi_pos[i] + (360 - pi_pos[i] + 10) / 20;

					var new_x = center_x + Math.sin(2 * Math.PI / 360 * pi_pos[i]) * 50;
					var new_y = center_y - Math.cos(2 * Math.PI / 360 * pi_pos[i]) * 50;

					e.style.top = new_y + "px";
					e.style.left = new_x + "px";
				}
			}

			function process_going(session_id)
			{
				process_time_last = process_time_last + 1;
				if(process_time_last >= 300)
				{
					setTimeout("process_complete('" + session_id +"')", 10);
					
					var e = document.getElementById("process_tip");
					e.innerHTML="登录成功，3 秒后跳转";

					setTimeout("login_success('" + 2 + "')", 1000);
					return;
				}
				setTimeout("process_going('" + session_id +"')", 10);
			}

			function process_complete(session_id)
			{
				var e = document.getElementById("pi_parent");
				var e1 = document.getElementById("login_success_img");
				pi_parent_scale = pi_parent_scale - 0.03;
				var temp = 1 - pi_parent_scale;
				e.style.transform = "translateX(-50%) scale(" + pi_parent_scale + ", " + pi_parent_scale + ")";
				e1.style.transform = "translateX(-50%) scale(" + temp + ", " + temp + ")";
				console.info(e1.style.transform);
				if(pi_parent_scale <= 0)
				{
					clearInterval(session_id);
					return;
				}
				setTimeout("process_complete('" + session_id +"')", 10);
			}
		</script>
	</head>
	<body>
		<div class="main-background main-background-img">
			<!-- <div class="space"></div> -->
			<div class="banner-background" id="test">
				<div class="login-background">
					<h2 style="color: #FFFFFF">用户登录</h2>
					<div class="normal-line">
						<div class="float-left">用户名：</div>
						<div class="float-right"><input class="textbox-common" type="text" name="usr"></div>
					</div>
					<div class="normal-line">
						<div class="float-left">密码：</div>
						<div class="float-right"><input class="textbox-common" type="password" name="pswd"></div>
					</div>
					<div style="height: 30px; text-align: right;">
						<div id="login_button" style="float: right; margin-right: 66px; background-color: #0078D7; height: 30px; width: 60px; text-align: center; cursor: pointer; color: white;" onmouseenter="button_mouseenter()" onmouseleave="button_mouseleave()" onmousedown="button_mousedown()" onmouseup="button_mouseup()" onclick="login_click()">
							<p style="top: 50%; transform: translateY(-50%);">登录</p>
						</div>
 					</div>
				</div>
			</div>
<!-- 			<div class="page-footer">
                <p>主办单位：垃圾网络有限公司 BMMS项目组™</p>
                <p>电话：13266618140 邮箱：wkqcom@live.com</p>
            </div> -->
			<div class="page-footer">
				<p>Copyright © TrashInc. BMMS-Project™</p>
				<p>All Right Reserved</p>
			</div>
		</div>
		<div class="login-process-cover" id="process_message">
			<div class="login-process-inner" id="pi_parent">
				<div id="pi0" class="process-item"></div>
				<div id="pi1" class="process-item"></div>
				<div id="pi2" class="process-item"></div>
				<div id="pi3" class="process-item"></div>
				<div id="pi4" class="process-item"></div>
			</div>
			<div id="login_success_img" class="login-process-inner login_success_image" ></div>
			<p id="process_tip" style="top: 460px; width: 100%; position: absolute;"> 登录中，请稍后。。。</p>
		</div>
	</body>
</html>
